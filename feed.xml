<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ko"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://binbyz.github.io//blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://binbyz.github.io//blog/" rel="alternate" type="text/html" hreflang="ko" /><updated>2024-02-14T04:58:47+00:00</updated><id>https://binbyz.github.io//blog/feed.xml</id><title type="html">byzzâ€™s programming note</title><subtitle>ë¹„ì¦ˆ ê°œë°œ ë…¸íŠ¸</subtitle><entry><title type="html">í´ëŸ¬ìŠ¤í„° í™˜ê²½, Duplicate Entry Error ë™ì‹œì„± ë¬¸ì œ</title><link href="https://binbyz.github.io//blog/laravel/2024/02/14/duplicate-entry-error.html" rel="alternate" type="text/html" title="í´ëŸ¬ìŠ¤í„° í™˜ê²½, Duplicate Entry Error ë™ì‹œì„± ë¬¸ì œ" /><published>2024-02-14T04:00:00+00:00</published><updated>2024-02-14T04:00:00+00:00</updated><id>https://binbyz.github.io//blog/laravel/2024/02/14/duplicate-entry-error</id><content type="html" xml:base="https://binbyz.github.io//blog/laravel/2024/02/14/duplicate-entry-error.html"><![CDATA[<h2 id="ê°œìš”-ë°-ì´ìŠˆ">ê°œìš” ë° ì´ìŠˆ</h2>

<p>í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´, <code class="language-plaintext highlighter-rouge">SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '4240834-UKEY' for key 'database.table_name'(Connection: mysql, SQL ..)</code>ì™€ ê°™ì€ ì˜¤ë¥˜ë¥¼ ì¢…ì¢… ë§ˆì£¼ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ìœ ëŠ” ê°„ë‹¨í•˜ë‹¤ ë™ì‹œì— ë§ì€ ìš”ì²­ì´ ì²˜ë¦¬ë  ë•Œ, íŠ¹íˆ ì—¬ëŸ¬ê°œì˜ Pod(í´ëŸ¬ìŠ¤í„° í™˜ê²½)ì—ì„œ ë™ì‹œì— ê°™ì€ ë°ì´í„°ë¥¼ ì‚½ì…(<code class="language-plaintext highlighter-rouge">INSERT</code>)í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œì˜ ë¡œì§ì´ ì¤‘ë³µ ì‚½ì…ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì¶©ë¶„í•œ ì²´í¬ê°€ ë˜ì§€ ì•Šì•˜ê±°ë‚˜ í˜¹ì€ ì‘ì„±ë¼ ìˆë‹¤ê³  í•˜ë”ë¼ë„ ë™ì‹œì„± ë¬¸ì œë¡œ ì¸í•´ ì¶©ë¶„íˆ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<ol>
  <li>ì˜¤ë¥˜ ë‚´ìš©ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ìœ ë‹ˆí¬ í‚¤ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒë§Œìœ¼ë¡œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë‚´ì—ì„œ ì¤‘ë³µì²´í¬ ë¡œì§ì„ ì‘ì„±í•©ë‹ˆë‹¤. ë¼ë¼ë²¨ë¡œ ì˜ˆë¥¼ë“¤ë©´ <code class="language-plaintext highlighter-rouge">Eloquent</code>ì˜ <code class="language-plaintext highlighter-rouge">firstOrCreate</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">updateOrCreate</code> ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬, ì¤‘ë³µ ì‚½ì…ì„ ì‹œë„í•˜ê¸° ì „ì— í•´ë‹¹ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì€ ë‹¨ì¼ ë…¸ë“œì—ì„œëŠ” íš¨ê³¼ì ì´ì§€ë§Œ, í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œëŠ” ì—¬ì „íˆ <strong>ê²½ìŸ ì¡°ê±´</strong>ì— ì˜í•´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>ë¶„ì‚° ë½(Distributed Locking): ë¼ë¼ë²¨ì—ì„œ ì œê³µí•˜ëŠ” ìºì‹œ ê¸°ë°˜ì˜ ë¶„ì‚° ë½ ë§¤ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì—¬, ë™ì‹œì— ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ëŠ” ìš”ì²­ë“¤ ì‚¬ì´ì—ì„œ ê²½ìŸ ì¡°ê±´ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ê°€ì¥ ì¼ë°˜ì ì€ Redisë¥¼ ì´ìš©í•˜ì—¬ ë½ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ol>

<h2 id="ë¶„ì‚°-ë½distributed-locking-ì˜ˆì‹œ">ë¶„ì‚° ë½(Distributed Locking) ì˜ˆì‹œ</h2>

<pre><code class="language-PHP">use Illuminate\Support\Facades\Cache;

$lock = Cache::lock('test_tracker_chance', 10); // 10ì´ˆ ë™ì•ˆ ë½ì„ ì–»ìœ¼ë ¤ê³  ì‹œë„

if ($lock-&gt;get()) {
    // ì¤‘ë³µ ì²´í¬ ë¡œì§ ì‹¤í–‰
    $exists = DB::table('test_trackers')
                -&gt;where('member_id', $memberId)
                -&gt;where('type', $type)
                -&gt;exists();

    if (!$exists) {
        // ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì‚½ì…
        DB::table('test_trackers')-&gt;insert([
            'member_id' =&gt; $memberId,
            'type' =&gt; $type,
            'value' =&gt; $value,
            'updated_at' =&gt; now(),
            'created_at' =&gt; now(),
        ]);
    }

    $lock-&gt;release(); // ì‘ì—… ì™„ë£Œ í›„ ë½ í•´ì œ
}
</code></pre>

<p>ì´ ì½”ë“œëŠ” Redis ë“±ì˜ ë¶„ì‚° ìºì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ ë½ì„ êµ¬í˜„í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">Cache::lock</code> ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë½ì„ ì–»ê³ , í•´ë‹¹ ë½ì„ ì–»ëŠ”ë° ì„±ê³µí•˜ë©´ ì¤‘ë³µ ë°ì´í„° ì‚½ì…ì„ ì‹œì¡°í•˜ê¸° ì „ì— ë°ì´í„°ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ ì²´í¬í•©ë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ë©´ <code class="language-plaintext highlighter-rouge">release</code> ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë½ì„ í•´ì œí•©ë‹ˆë‹¤.</p>

<h2 id="ì£¼ì˜ì ">ì£¼ì˜ì </h2>

<p>ìœ„ ì½”ë“œì—ì„œëŠ” ë‹¤ë¥¸ ë¬¸ì œë¡œ ë³€ì§ˆë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<ol>
  <li>ì„±ëŠ¥ ì˜í–¥: ë½ì„ ì‚¬ìš©í•˜ë©´ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì´ ìˆœì°¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ê³ ì„±ëŠ¥ì´ ìš”êµ¬ë˜ëŠ” í™˜ê²½ì—ì„œëŠ” ìš”ì²­ ì²˜ë¦¬ ì‹œê°„ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë½ì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì˜ì—­ê³¼ ë¡œì§ì„ ìµœì†Œí™”í•˜ê³ , ê°€ëŠ¥í•œ í•œ ë¹ ë¥´ê²Œ ë½ì„ í•´ì œí•˜ì—¬ ë‹¤ë¥¸ ìš”ì²­ì´ ëŒ€ê¸° ì‹œê°„ ì—†ì´ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</li>
  <li>ë°ë“œë½(deadlock) ë°©ì§€: ë½ì„ ì‚¬ìš©í•  ë•ŒëŠ” í•­ìƒ ë°ë“œë½(deadlock)ì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë°ë“œë½ì€ ë‘ ê°œ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ë³´ìœ í•œ ìì›ì˜ í•´ì œë¥¼ ë¬´í•œíˆ ê¸°ë‹¤ë¦¬ëŠ” êµì°© ìƒíƒœë¥¼ ë§í•©ë‹ˆë‹¤. ë¼ë¼ë²¨ì˜ <code class="language-plaintext highlighter-rouge">Cache::lock</code> ë©”ì†Œë“œëŠ” ë½ì„ ì–»ì§€ ëª»í–ˆì„ ë•Œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜, ì„¤ì •í•œ ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ ì‹¤ì±„ ì²˜ë¦¬ë˜ë¯€ë¡œ ë°ë“œë½ì„ ë°©ì§€í•˜ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</li>
</ol>

<h2 id="ì»¤ë„¥ì…˜connection-ë¶„ë¦¬">ì»¤ë„¥ì…˜(connection) ë¶„ë¦¬</h2>

<p><code class="language-plaintext highlighter-rouge">Cache::lock</code>ì„ ì‚¬ìš©í•  ë•Œ ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»¤ë„¥ì…˜ê³¼ ë³„ê°œë¡œ ë¶„ë¦¬í•˜ëŠ”ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">config/cache.php</code> íŒŒì¼ì—ì„œ ì»¤ë„¥ì…˜ì„ ìƒˆë¡­ê²Œ ì •ì˜í•˜ê³  íŠ¹ì • ìºì‹œ ì—°ê²°ì„ <code class="language-plaintext highlighter-rouge">lockConnection</code>ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">Cache::store('yourLockConnection')-&gt;lock(...)</code> í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code class="language-PHP">'redis' =&gt; [
    'client' =&gt; 'predis',

    'options' =&gt; [
        'cluster' =&gt; 'redis',
        'prefix' =&gt; env('REDIS_PREFIX', 'laravel_database_'),
    ],

    'default' =&gt; [
        'url' =&gt; env('REDIS_URL'),
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD', null),
        'port' =&gt; env('REDIS_PORT', '6379'),
        'database' =&gt; env('REDIS_DB', '0'),
    ],

    // ë¶„ì‚° ë½ì„ ìœ„í•œ ë³„ë„ì˜ ì—°ê²° ì¶”ê°€
    'lockConnection' =&gt; [
        'url' =&gt; env('REDIS_URL'),
        'host' =&gt; env('REDIS_HOST', '127.0.0.1'),
        'password' =&gt; env('REDIS_PASSWORD', null),
        'port' =&gt; env('REDIS_PORT', '6379'),
        'database' =&gt; env('REDIS_LOCK_DB', '1'), // ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ë¥¸ DB ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©
    ],
],
</code></pre>

<p>ì´ë ‡ê²Œ ì„¤ì •í•œ í›„, <code class="language-plaintext highlighter-rouge">Cache::store('redis')-&gt;lock(...)</code> ëŒ€ì‹  <code class="language-plaintext highlighter-rouge">lockConnection</code>ì„ ì‚¬ìš©í•˜ì—¬ <code class="language-plaintext highlighter-rouge">Cache::store('lockConnection')-&gt;lock(...)</code> í˜•ì‹ìœ¼ë¡œ ë¶„ì‚° ë½ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<pre><code class="language-PHP">$lock = Cache::store('lockConnection')-&gt;lock('migration_tracker_insert', 10);

if ($lock-&gt;get()) {
    // ë½ì„ ì„±ê³µì ìœ¼ë¡œ ì–»ì—ˆì„ ë•Œì˜ ë¡œì§
    // ...

    $lock-&gt;release(); // ì‘ì—… ì™„ë£Œ í›„ ë½ í•´ì œ
}
</code></pre>

<p>ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´, ê¸°ë³¸ ìºì‹œ ë°ì´í„°ì™€ ë¶„ì‚° ë½ì„ ìœ„í•œ ë°ì´í„°ë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ê²½ìŸ ìƒíƒœë¥¼ ìµœì†Œí™”í•˜ëŠ”ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶„ì‚° ë½ì„ ìœ„í•œ ë³„ë„ì˜ ì—°ê²°ì„ ì„¤ì •í•¨ìœ¼ë¡œì¨, ìºì‹œ ë°ì´í„°ì™€ ë½ ë°ì´í„° ê°„ì˜ ìƒí˜¸ ì‘ìš©ì´ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>]]></content><author><name></name></author><category term="Laravel" /><summary type="html"><![CDATA[ê°œìš” ë° ì´ìŠˆ]]></summary></entry><entry><title type="html">React Native, JSX</title><link href="https://binbyz.github.io//blog/react/native/2024/02/11/jsx.html" rel="alternate" type="text/html" title="React Native, JSX" /><published>2024-02-11T08:07:00+00:00</published><updated>2024-02-11T08:07:00+00:00</updated><id>https://binbyz.github.io//blog/react/native/2024/02/11/jsx</id><content type="html" xml:base="https://binbyz.github.io//blog/react/native/2024/02/11/jsx.html"><![CDATA[<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">TextInput</span>
  <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span>
  <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">input</span><span class="p">}</span>
  <span class="nx">placeholder</span><span class="o">=</span><span class="p">{</span><span class="nx">working</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Add a To Do</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Where do you want to go?</span><span class="dl">'</span><span class="p">}</span>
  <span class="nx">returnKeyType</span><span class="o">=</span><span class="dl">"</span><span class="s2">done</span><span class="dl">"</span>
  <span class="nx">secureTextEntry</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
  <span class="nx">multiline</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
  <span class="nx">placeholderTextColor</span><span class="o">=</span><span class="p">{</span><span class="nx">theme</span><span class="p">.</span><span class="nx">grey</span><span class="p">}</span>
  <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">onChangeText</span><span class="p">}</span>
  <span class="nx">onSubmitEditing</span><span class="o">=</span><span class="p">{</span><span class="nx">onSubmit</span><span class="p">}</span>
<span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<p>ê°‘ìê¸° ìœ„ì˜ ì½”ë“œë¥¼ ë³´ê³  ì¸ì§€ë¶€ì¡°í™”ê°€ ì™”ìŠµë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">value={text}</code> â€œì—¬ê¸°ì„œ brace(<code class="language-plaintext highlighter-rouge">{</code>, <code class="language-plaintext highlighter-rouge">}</code>)ëŠ” ê°‘ìê¸° ì™œ ìˆëŠ”ê±°ì§€?â€</li>
  <li>â€œí•¨ìˆ˜ì˜ ë³¸ë¬¸ì„ ì‘ì„±í• ë•Œ ì‚¬ìš©ëœ ë¬¸ë²•ê³¼ ë™ì¼í•œê°€?â€</li>
</ul>

<p>ì˜¤ëœë§Œì— ë°±ì—”ë“œ ê°œë°œì„ í•˜ë‹¤ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì§„ì˜ìœ¼ë¡œ ë„˜ì–´ì˜¤ë©´ ê°€ë” ì´ëŸ° ì¸ì§€ë¶€ì¡°í™”ê°€ ì˜µë‹ˆë‹¤.</p>

<h2 id="ì™œ-valuetextë¡œ-ì‘ì„±í•˜ë©´-ì•ˆë˜ëŠ”ê°€">ì™œ <code class="language-plaintext highlighter-rouge">value=text</code>ë¡œ ì‘ì„±í•˜ë©´ ì•ˆë˜ëŠ”ê°€?</h2>

<p>JSXì—ì„œ ì†ì„±ì„ ì§€ì •í•  ë•Œ <code class="language-plaintext highlighter-rouge">value=text</code>ì™€ ê°™ì´ ì‘ì„±í•˜ë©´, <code class="language-plaintext highlighter-rouge">text</code>ë¥¼ ë¬¸ìì—´ ë¦¬í„°ëŸ´ë¡œ ì¸ì‹í•˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í‘œí˜„ì‹ì˜ ê°’ì„ ì†ì„±ì— ì „ë‹¬í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">{}</code>ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">{}</code> ì•ˆì— ì‘ì„±ëœ ì½”ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í‘œí˜„ì‹ìœ¼ë¡œ í‰ê°€ë˜ê³ , ê·¸ ê²°ê³¼ê°€ í•´ë‹¹ ì†ì„±ì˜ ê°’ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">value={text}</code> ëŠ” <code class="language-plaintext highlighter-rouge">text</code> ë³€ìˆ˜ì˜ í˜„ì¬ ê°’ì„ <code class="language-plaintext highlighter-rouge">value</code> ì†ì„±ì— ë°”ì¸ë”© í•˜ë ¤ë©´ í•„ìˆ˜ì ì¸ ë¬¸ë²•ì…ë‹ˆë‹¤.</p>

<h2 id="ì‹¤ì œ-ì»´íŒŒì¼ëœ-ìë°”ìŠ¤í¬ë¦½íŠ¸-ì½”ë“œëŠ”-ì–´ë–»ê²Œ-ë˜ëŠ”ê°€">ì‹¤ì œ ì»´íŒŒì¼ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œëŠ” ì–´ë–»ê²Œ ë˜ëŠ”ê°€?</h2>

<p>JSX ì½”ë“œê°€ íŠ¸ëœìŠ¤íŒŒì¼ ê³¼ì •ì„ ê±°ì¹˜ë©´, Reactì˜ createElement í•¨ìˆ˜ í˜¸ì¶œë¡œ ë³€í™˜ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, JSXì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±ëœ ì½”ë“œ</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">TextInput</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<p>íŠ¸ëœìŠ¤íŒŒì¼ í›„ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œëŠ” ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<pre><code class="language-Typescript">React.createElement(TextInput, { value: text }, null);
</code></pre>

<p>ì´ì™€ ê°™ì´ JSX ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ React ìš”ì†Œë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ë³´ë‹¤ ì„ ì–¸ì ì´ê³  ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ì–´ ì£¼ì§€ë§Œ, ì‹¤ì œë¡œëŠ” <code class="language-plaintext highlighter-rouge">React.createElement</code> í•¨ìˆ˜ í˜¸ì¶œë¡œ ë³€í™˜ë˜ì–´ JavaScript ì—”ì§„ì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ë”°ë¼ì„œ JSXì—ì„œ <code class="language-plaintext highlighter-rouge">{}</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ JavaScript í‘œí˜„ì‹ì„ í†µí•´ <strong>ë™ì ì¸ ê°’ì„ ì»´í¬ë„ŒíŠ¸ì˜ ì†ì„±ìœ¼ë¡œ ì „ë‹¬</strong>í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì¤‘ìš”í•œ ë¬¸ë²•ì  ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>]]></content><author><name></name></author><category term="React" /><category term="Native" /><summary type="html"><![CDATA[&lt;TextInput value={text} style={styles.input} placeholder={working ? 'Add a To Do' : 'Where do you want to go?'} returnKeyType="done" secureTextEntry={false} multiline={false} placeholderTextColor={theme.grey} onChangeText={onChangeText} onSubmitEditing={onSubmit} /&gt;]]></summary></entry><entry><title type="html">React Native, Hook</title><link href="https://binbyz.github.io//blog/react/native/2024/02/11/react-native-beginner.html" rel="alternate" type="text/html" title="React Native, Hook" /><published>2024-02-11T06:24:00+00:00</published><updated>2024-02-11T06:24:00+00:00</updated><id>https://binbyz.github.io//blog/react/native/2024/02/11/react-native-beginner</id><content type="html" xml:base="https://binbyz.github.io//blog/react/native/2024/02/11/react-native-beginner.html"><![CDATA[<h2 id="react-native-hook-basic">React Native Hook Basic</h2>

<h3 id="useeffect">useEffect</h3>

<pre><code class="language-Typescript">useEffect(() =&gt; {
    loadTodos();
}, []);
</code></pre>

<ul>
  <li><code class="language-plaintext highlighter-rouge">useEffect</code> í›…ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ(ì¦‰, í™”ë©´ì— ì²˜ìŒìœ¼ë¡œ ë Œë”ë§ë  ë•Œ) <code class="language-plaintext highlighter-rouge">loadToDos()</code> í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.</li>
  <li>ë‘ ë²ˆì§¸ ì¸ìëŠ” ì˜ì¡´ì„± ë°°ì—´ë¡œ, ì´ ë°°ì—´ì˜ ê°’ì— ë”°ë¼ ë¶€ìˆ˜ íš¨ê³¼ì˜ ì‹¤í–‰ ì‹œì ì´ ê²°ì •ëœë‹¤.
    <ul>
      <li>ì˜ˆë¥¼ë“¤ì–´ <code class="language-plaintext highlighter-rouge">[todos]</code>ì™€ ê°™ì´ ìƒíƒœ ë³€ìˆ˜ë¥¼ ë°°ì—´ì— í¬í•¨ì‹œí‚¤ë©´, <code class="language-plaintext highlighter-rouge">todos</code> ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.</li>
      <li>í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ì‚¬ìš©ëœ ë¹ˆ ë°°ì—´ì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³ , ê·¸ ì´í›„ì—ëŠ” ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•¨ìœ¼ë¡œì¨ ì´ˆê¸° ë°ì´í„° ë¡œë”© ê°™ì€ ìš©ë„ë¡œ ìì£¼ ì‚¬ìš©ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="usestate">useState</h3>

<pre><code class="language-Typescript">const [toDos, setToDos] = useState&lt;ToDo&gt;({});
</code></pre>

<ul>
  <li>ìœ„ì˜ <code class="language-plaintext highlighter-rouge">toDos</code>ì™€ ê°™ì€ <strong>ìƒíƒœ ë³€ìˆ˜</strong>ëŠ” ì§ì ‘ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” <strong>ë¶ˆë³€(immutable)</strong> ìƒíƒœë¡œ ì·¨ê¸‰ëœë‹¤.
    <ul>
      <li>Reactì—ì„œ ìƒíƒœ ê´€ë¦¬ëŠ” ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤. ì´ëŠ” Reactê°€ íš¨ìœ¨ì ìœ¼ë¡œ UIë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">setToDos</code>ëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">toDos</code>ì˜ ê°’ì„ ì§ì ‘ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  í•„ìš”ê°€ ìˆì„ ë•ŒëŠ” í•­ìƒ <code class="language-plaintext highlighter-rouge">setToDos</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ìƒíƒœ ê°’ì„ ì „ë‹¬í•´ì•¼ í•œë‹¤. (Reactì˜ ìƒíƒœ ë¶ˆë³€ì„± ì›ì¹™)</li>
    </ul>
  </li>
</ul>

<pre><code class="language-Typescript">// ì˜ëª»ëœ ì˜ˆ: ìƒíƒœë¥¼ ì§ì ‘ ë³€ê²½
toDos.key = newValue;

// ì˜¬ë°”ë¥¸ ì˜ˆ: ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ìƒíƒœ ì—…ë°ì´íŠ¸
setToDos({ key: newValue });
</code></pre>]]></content><author><name></name></author><category term="React" /><category term="Native" /><summary type="html"><![CDATA[React Native Hook Basic]]></summary></entry><entry><title type="html">spatie/laravel-data ë°ì´í„° ê°ì²´ ë³µì œ</title><link href="https://binbyz.github.io//blog/laravel/2024/01/30/spatie-laravel-data-tips.html" rel="alternate" type="text/html" title="spatie/laravel-data ë°ì´í„° ê°ì²´ ë³µì œ" /><published>2024-01-30T04:12:00+00:00</published><updated>2024-01-30T04:12:00+00:00</updated><id>https://binbyz.github.io//blog/laravel/2024/01/30/spatie-laravel-data-tips</id><content type="html" xml:base="https://binbyz.github.io//blog/laravel/2024/01/30/spatie-laravel-data-tips.html"><![CDATA[<p>ì˜¤í”ˆì†ŒìŠ¤ ê°œë°œ íšŒì‚¬ <strong>spatie</strong>ì—ì„œ ê°œë°œëœ <a href="https://spatie.be/docs/laravel-data/v3/introduction">laravel-data</a> íŒ¨í‚¤ì§€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤. ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ <strong>laravel-data</strong>ë¥¼ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>Powerful data objects for laravel</p>

  <p>â€¦ can be used in various ways. Using this package you only need to describe your data once:</p>

  <ul>
    <li>instead of a form request, you can use a data object</li>
    <li>instead of an API transformer, you can use a data object</li>
    <li>instead of manually writing a typescript definition, you can useâ€¦ ğŸ¥ a data object</li>
  </ul>
</blockquote>

<p>ì†Œê°œì—ì„œì™€ ê°™ì´ í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">Request</code> ê°ì²´ë¥¼ ë§Œë“¤ê³  <strong>validate</strong>ë„ ê°™ì´ ì²´í¬í•  ìˆ˜ ìˆê³ , <strong>transformer</strong>ë¥¼ ì ìš©ì‹œí‚´ìœ¼ë¡œì¨ ì‰½ê³  ì§ê´€ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì—¬ê¸°ì„œ ë§í•˜ëŠ” transformerì— ê°„ë‹¨í•œ ì˜ˆì‹œëŠ” ê°ì±„ í´ë˜ìŠ¤ ë‚´ì—ì„œëŠ” CamelCase ë¬¸ë²•ì„ ë”°ë¥´ì§€ë§Œ, APIë¡œ ì‘ë‹µí•  ë•ŒëŠ” snake_caseë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.) ê·¸ë¦¬ê³  ì‘ì„±ëœ ë°ì´í„° ê°ì²´ë¥¼ í†µí•´ <strong>typescript definition</strong>ì„ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ëª¨ë“  ê²ƒë“¤ì€ PHP 8ì˜ <strong>attributes</strong>ë¥¼ í†µí•´ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>

<h2 id="ì„¤ì¹˜">ì„¤ì¹˜</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require spatie/laravel-data
</code></pre></div></div>

<h2 id="ì‚¬ìš©ë²•">ì‚¬ìš©ë²•</h2>

<p>ê·¸ëŸ¼ <a href="https://spatie.be/docs/laravel-data/v3/introduction">spatie/laravel-data</a>ë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê°„ë‹¨íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers\Requests</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Data</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">FeedbackRequest</span> <span class="kd">extends</span> <span class="nc">Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$id</span><span class="p">,</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$point</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•ì€ ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">Spatie\LaravelData\Data</code> ê°ì²´ë¥¼ ìƒì†í•˜ê³ , ì†ì„±ë“¤(<code class="language-plaintext highlighter-rouge">$id</code>, <code class="language-plaintext highlighter-rouge">$point</code>)ì„ ì •ì˜í•´ ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ì²´ë¥¼ ìƒì„±í•  ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´  <code class="language-plaintext highlighter-rouge">from</code> static ë©”ì†Œë“œë¥¼ í†µí•´ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$feedback</span> <span class="o">=</span> <span class="nc">FeedbackRequest</span><span class="o">::</span><span class="nf">from</span><span class="p">([</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'point'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>ê·¸ëŸ¬ë©´ <code class="language-plaintext highlighter-rouge">Spatie\LaravelData\Data</code> ê°ì²´ë¥¼ ê°€ì§€ê³  ë¼ë¼ë²¨ì˜ <strong>Request</strong> ê°ì²´ë¥¼ ë§Œë“¤ë©´ì„œ <strong>validate</strong>ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜ˆì‹œë¥¼ ì´ì–´ì„œ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h3 id="request-ê°ì²´-ìƒì„±">Request ê°ì²´ ìƒì„±</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers\Requests</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\MapInputName</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\Validation\In</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\Validation\IntegerType</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\Validation\Required</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Data</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Mappers\SnakeCaseMapper</span><span class="p">;</span>

<span class="na">#[MapInputName(SnakeCaseMapper::class)]</span>
<span class="kd">class</span> <span class="nc">PointRequest</span> <span class="kd">extends</span> <span class="nc">Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="na">#[Required, IntegerType]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$id</span><span class="p">,</span>

        <span class="na">#[Required, In([1, 2, 3])]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$point</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìœ„ì˜ <strong>Request</strong> ê°ì²´ëŠ” <code class="language-plaintext highlighter-rouge">#[MapInputName(SnakeCaseMapper::class)]</code> snake_caseë¥¼ í†µí•´ íŒŒë¼ë©”í„°ë¥¼ ë§¤ì¹­ì‹œí‚¤ê³ , <code class="language-plaintext highlighter-rouge">#[Required, IntegerType]</code>ì„ í†µí•´ validateë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒë“¤ì´ PHP 8ì˜ <strong>attributes</strong>ë¥¼ í†µí•´ ì‹¤í–‰ë©ë‹ˆë‹¤. ì •ë§ ì§ê´€ì ì´ì§€ ì•Šë‚˜ìš”? ìœ„ì™€ ê°™ì´ ì‘ì„±ëœ í´ë˜ìŠ¤ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Http\Controllers</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">App\Http\Controllers\Requests\PointRequest</span><span class="p">;</span>

<span class="k">readonly</span> <span class="kd">class</span> <span class="nc">PointController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">incresePoint</span><span class="p">(</span><span class="kt">PointRequest</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">id</span><span class="p">;</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">point</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ ë ˆì´ì–´ê¹Œì§€ ë“¤ì–´ì˜¤ê¸° ì „ì— ì´ë¯¸ <strong>validate</strong>ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤. ë”°ë¼ì„œ <strong>validate</strong>ê°€ í†µê³¼ë˜ì§€ ëª» í•˜ë©´ ë¼ë¼ë²¨ì€ <strong>422 Unprocessable Entity</strong>ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>

<h3 id="dtodata-transfer-object-ê°ì²´-ìƒì„±">DTO(Data Transfer Object) ê°ì²´ ìƒì„±</h3>

<p>DTO ê°ì²´ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ë°©ë²•ì€ ë¹„ìŠ·í•©ë‹ˆë‹¤. ì¥ì ì€ ì¤‘ì²©ëœ í´ë˜ìŠ¤ í˜•íƒœë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">Data::from</code> ë©”ì†Œë“œë¥¼ í†µí•´ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Services\Product\Dto</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Carbon\Carbon</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\DataCollectionOf</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\MapOutputName</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Data</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\DataCollection</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Mappers\SnakeCaseMapper</span><span class="p">;</span>

<span class="na">#[MapOutputName(SnakeCaseMapper::class)]</span>
<span class="kd">class</span> <span class="nc">BagDto</span> <span class="kd">extends</span> <span class="nc">Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$count</span><span class="p">,</span>

        <span class="na">#[DataCollectionOf(BagItemDto::class)]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">DataCollection</span> <span class="nv">$items</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">App\Services\Product\Dto</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Attributes\MapOutputName</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Data</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Spatie\LaravelData\Mappers\SnakeCaseMapper</span><span class="p">;</span>

<span class="na">#[MapOutputName(SnakeCaseMapper::class)]</span>
<span class="kd">class</span> <span class="nc">BagItemDto</span> <span class="kd">extends</span> <span class="nc">Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$id</span><span class="p">,</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="nv">$itemName</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">BagDto</code>ë¼ëŠ” ê°€ë°©ì€ ê°¯ìˆ˜ì™€ ê° ì•„ì´í…œë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ê°ì²´ë¡œ ìƒì„±í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">items</code>ì— ë°°ì—´ í˜•íƒœë¡œ ë„˜ê¸°ê±°ë‚˜ ë¼ë¼ë²¨ì˜ <code class="language-plaintext highlighter-rouge">Collection</code>ì— ë‹´ì•„ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$items</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'itemName'</span> <span class="o">=&gt;</span> <span class="s1">'item1'</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'itemName'</span> <span class="o">=&gt;</span> <span class="s1">'item2'</span><span class="p">],</span>
<span class="p">];</span>

<span class="nv">$bag</span> <span class="o">=</span> <span class="nc">BagDto</span><span class="o">::</span><span class="nf">from</span><span class="p">([</span>
    <span class="s1">'count'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'items'</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$bag</span> <span class="o">=</span> <span class="nc">BagDto</span><span class="o">::</span><span class="nf">from</span><span class="p">([</span>
    <span class="s1">'count'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'items'</span> <span class="o">=&gt;</span> <span class="nf">collect</span><span class="p">(</span><span class="nv">$items</span><span class="p">),</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>ë˜ í•œ, <code class="language-plaintext highlighter-rouge">#[MapOutputName(SnakeCaseMapper::class)]</code>ë¥¼ í†µí•´ snake_caseë¡œ ë³€í™˜ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ API ìƒì—ì„œ ì‘ë‹µëœ ë°ì´í„° í¬ë§·ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">$itemName</code> ì†ì„±ì´ snake_case í¬ë§·ìœ¼ë¡œ ë³€í™˜ë˜ì–´ ì¶œë ¥ë©ë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"count"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"items"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"item_name"</span><span class="o">:</span> <span class="s2">"item1"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"item_name"</span><span class="o">:</span> <span class="s2">"item2"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìœ„ì— ì˜ˆì‹œë“¤ì€ ë¼ë¼ë²¨ì˜ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì„ í†µí•´ ì´ë¯¸ êµ¬í˜„ ê°€ëŠ¥í•œ ë¶€ë¶„ì´ì§€ë§Œ <code class="language-plaintext highlighter-rouge">spatie/laravel-data</code> íŒ¨í‚¤ì§€ë¥¼ í†µí•´ ë” ì§ê´€ì ì´ê³  ì¡°ê¸ˆ ë” í´ë˜ìŠ¤ ì¹œí™”ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, <code class="language-plaintext highlighter-rouge">spatie/laravel-data</code> íŒ¨í‚¤ì§€ë¥¼ í†µí•´ <strong>typescript definition</strong>ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="typescript-definition-ìƒì„±">Typescript Definition ìƒì„±</h3>

<p>ì´ë¯¸ ìš°ë¦¬ëŠ” DTO ì˜ˆì‹œì—ì„œ <code class="language-plaintext highlighter-rouge">BagDto</code>ì™€ <code class="language-plaintext highlighter-rouge">BagItemDto</code>ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì— ì¶”ê°€ì ì¸ <strong>Attributes</strong> ì‘ì„±ì„ í†µí•´ ì‰½ê²Œ <strong>typescript definition</strong>ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì‹¤í–‰í•˜ë©´ ì¶”ê°€ì ì¸ íŒ¨í‚¤ì§€ê°€ ìš”êµ¬ë©ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require spatie/laravel-typescript-transformer
</code></pre></div></div>

<p>í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ìì„¸í•œ ì‚¬ìš©ë²•ì€ ì¶”í›„ ë‹¤ë¥¸ ê²Œì‹œê¸€ì„ í†µí•´ ìì„¸íˆ ë” ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œë¥¼ í†µí•´ ì´ë¯¸ ìì„¸í•œ ë‚´ìš©ì´ ì„¤ëª…ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•´ë„ ë©ë‹ˆë‹¤. <a href="https://spatie.be/docs/typescript-transformer/v2/introduction">spatie/laravel-typescript-transformer</a></p>

<p>í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ìƒì‚°ì„±ì€ DTOë¥¼ í†µí•´ ì˜ êµ¬ì„±ëœ API ë¦¬ì†ŒìŠ¤ë“¤ì„ í´ë¼ì´ì–¸íŠ¸ ê°œë°œìì™€ í•¨ê»˜ í˜‘ì—…í•˜ê¸°ì— ìš©ì´í•©ë‹ˆë‹¤. ì–´ë””ê¹Œì§€ë‚˜ ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤.</p>

<h3 id="ì‹¬í™”í¸-ê°ì²´-ë³µì œí•˜ê¸°">ì‹¬í™”í¸: ê°ì²´ ë³µì œí•˜ê¸°</h3>

<p>ìƒì„±ëœ DTO ê°ì²´ë¥¼ ì¼ë¶€ ê°’ë§Œ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” <code class="language-plaintext highlighter-rouge">BadItemDto</code>ì˜ <code class="language-plaintext highlighter-rouge">$id</code> ê°’ì€ ìœ ì§€í•˜ë©´ì„œ <code class="language-plaintext highlighter-rouge">$itemName</code>ë§Œ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œë¥¼ ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">#[MapOutputName(SnakeCaseMapper::class)]</span>
<span class="kd">class</span> <span class="nc">BagItemDto</span> <span class="kd">extends</span> <span class="nc">Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="nv">$id</span><span class="p">,</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="nv">$itemName</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">withItemName</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$itemName</span><span class="p">):</span> <span class="kt">self</span>
    <span class="p">{</span>
        <span class="c1">// array í˜•íƒœë¡œ ë³€í™˜</span>
        <span class="nv">$bagItem</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">transform</span><span class="p">(</span><span class="n">transformValues</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="n">mapPropertyNames</span><span class="o">:</span> <span class="kc">false</span><span class="p">);</span>

        <span class="nv">$bagItem</span><span class="p">[</span><span class="s1">'itemName'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$itemName</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">self</span><span class="o">::</span><span class="nf">from</span><span class="p">(</span><span class="nv">$bagItem</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>í•´ë‹¹ ì˜ˆì œì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">#[MapOutputName(SnakeCaseMapper::class)]</code>ë¥¼ í†µí•´ snake_caseë¡œ ë³€í™˜ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì´ ì—†ë‹¤ë©´ ê°„í¸í•˜ê²Œ <code class="language-plaintext highlighter-rouge">$this-&gt;with()</code> ë©”ì†Œë“œë¥¼ í†µí•´ ì›ë³¸ ë°ì´í„°ë¥¼ ì—°ê´€ ë°°ì—´ë¡œ ë¦¬í„´ ë°›ì„ ìˆ˜ ìˆì§€ë§Œ, snake_caseë¡œ ë³€í™˜ ê·œì¹™ì´ ì‘ì„±ë¼ ìˆìœ¼ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">$this-&gt;transform(transformValues: false, mapPropertyNames: false)</code>ë¥¼ í†µí•´ ì—°ê´€ ë°°ì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì—°ê´€ ë°°ì—´ë¡œ ë³€í™˜ëœ ë°ì´í„°ë¥¼ í†µí•´ ì›í•˜ëŠ” ê°’ì„ ë³€ê²½í•˜ê³  <code class="language-plaintext highlighter-rouge">self::from($bagItem)</code>ë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$bagItem</span> <span class="o">=</span> <span class="nc">BagItemDto</span><span class="o">::</span><span class="nf">from</span><span class="p">([</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'itemName'</span> <span class="o">=&gt;</span> <span class="s1">'item1'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$bagItem</span><span class="o">-&gt;</span><span class="nf">withItemName</span><span class="p">(</span><span class="s1">'item2'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</h2>

<p>ì–´ë””ê¹Œì§€ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì±„íƒí•˜ê³  ì‚¬ìš©í•˜ê³ ëŠ” ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤. ë¼ë¼ë²¨ì„ ê²½í—˜í•˜ì‹ ì§€ ì–¼ë§ˆ ë˜ì§€ ì•Šìœ¼ì…¨ìœ¼ë©´ ë¼ë¼ë²¨ ë³¸ë˜ì˜ ê¸°ëŠ¥ì„ í•œ ë²ˆ ì ‘í•˜ì‹œê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì‹œê¸¸ ê¶Œì¥í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìœ„ì˜ ì‘ì„±ëœ ë°©ë²•ê³¼ ë¹„êµí•˜ê³  ì–´ë–¤ ë¶€ë¶„ì´ ìš°ë¦¬ íŒ€ì— ë” ì í•©í•œ ë°©ë²•ì´ ë ì§€ ê³ ë¯¼í•´ ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>]]></content><author><name></name></author><category term="Laravel" /><summary type="html"><![CDATA[ì˜¤í”ˆì†ŒìŠ¤ ê°œë°œ íšŒì‚¬ spatieì—ì„œ ê°œë°œëœ laravel-data íŒ¨í‚¤ì§€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤. ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ laravel-dataë¥¼ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.]]></summary></entry></feed>